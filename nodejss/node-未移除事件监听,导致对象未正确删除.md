# NodeJS未移除事件监听,导致对象未释放

在D21web开发过程中,当ws连接断开后重连,出现请求一次抽卡,抽多张,或者多个游戏对象发送来刷新数据.

***

出现多个游戏对象发送来刷新数据的情况,是因为虽然我在ws断开后进行了处理,但是没有移除room的继承自`events`的事件监听器,导致我想释放的game对象依然保存在room的事件监听器里.

所以,当我请求抽牌时多个game监听到了room的请求(同room),导致了这个情况的发生.

所以,在`js`中,如果用到了类似`events`的事件系统,一定要记得移除监听,避免出错,以及使js能正确释放不用的内存.

***

出现请求一次抽卡,抽多张,是因为我在room中重复注册了多次监听导致的.