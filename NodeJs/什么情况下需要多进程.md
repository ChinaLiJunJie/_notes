参考资料:

[进程,线程与协程](http://www.cnblogs.com/Eva-J/p/5106688.html)

[关于单核cpu多进程的意义的讨论](https://www.v2ex.com/t/235443)

[NodeJs使用子进程](http://www.runoob.com/nodejs/nodejs-process.html)

[cluster多进程](http://www.cnblogs.com/kenkofox/p/5431643.html)

在d21pk_s的开发中,我遇到了一个困惑,如果我需要一个平台,平台下有许多游戏,我应该如何设计系统架构?

由于基础不牢,我先查询了关于进程线程协程的基本概念.

在单核环境下,所有进程共用同一cpu的时间,因此,多进程提升cpu计算的意义为零甚至可能是负数.但是由于防止io请求的堵塞,多进程可以有效提升cpu空闲时间的利用率,所以在单核环境下,多进程还是有一定的意义.

nodejs由于异步机制,因io堵塞导致cpu空闲的时间会比较少,所以多进程的意义不大

在多核环境下,多进程的优势就体现出来了.nodejs可以使用node自带的子进程功能,或者用cluster库来实现.

而项目的需求是单平台,多游戏,互相之间互不影响,所以多进程是必须的.

那是采用子进程的方式来进行多进程,还是平台和每个游戏都是独立进程,平台分配ip和端口,共用数据库?

我的初步设计是:

平台与游戏都为独立进程,如果有需要可以添加多进程.

平台采用分配ip的方式分配用户到各个游戏进程.

共用一个公共数据库,都有自己的子数据库.

但是这样做有一个问题,客户端可能需要同时维持多个长连接.不知道是否会存在什么问题.