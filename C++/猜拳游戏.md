#include <iostream>
#include <time.h>
using namespace std;
#define Rand(x,y) (double)rand() / RAND_MAX*(y - x) + x;

int calscore = 10;
int score();
int cpucin();
int leave();

int score(int i)
{
	switch (i)
	{
	case 1:
		calscore += 1;
		cout << "您当前的分数为 " << calscore << endl;
		break;
	case 0:
		calscore -= 1;
		cout << "您当前的分数为 " << calscore << endl;
		break;
	case 2:
		cout << "您当前的分数为 " << calscore << endl;
		break;
	}
	return 0;
}

int cpucin()
{
	int i;
	i = Rand(1, 4);
	if (i == 1)
	{
		cout << "电脑出了拳头。" << endl;
		return 1;
	}
	else if (i == 2)
	{
		cout << "电脑出了剪刀。" << endl;
		return 2;
	}
	else if (i == 3)
	{
		cout << "电脑出了布。" << endl;
		return 3;
	}
}

int leave(int i)
{	
	if (i == 1)
	{
		return 1;
	}
	else if (i == 2)
	{
		return 2;
	}
	else{
		return 0;
	}
}
 

int main()
{
	srand((int)time(0));
	Rand(0,100)
	cout << "欢迎进入猜拳游戏" << endl;
	score(2);
	while (true)
	{
		int playeri;
		cout << "出拳头输入1，出剪刀输入2，出布输入3" << endl;
		cin >> playeri;
		if (playeri < 0 || playeri>3)
		{
			playeri = 0;
		}
		if (playeri == 0)
		{
			cout << "您的输入有误。" << endl;
			cout << "由于您输入不合法，系统判负" << endl;
			score(0);
		}
		else if (playeri == 1)
		{
			cout << "您出了拳头。" << endl;
			switch (cpucin())
			{
			case 1:
				cout << "拳头对拳头，平局。" << endl;
				score(2);
				break;
			case 2:
				cout << "拳头对剪刀，获胜。" << endl;
				score(1);
				break;
			case 3:
				cout << "拳头对布，判负。" << endl;
				score(0);
				break;
			}
		}
		else if (playeri == 2)
		{
			cout << "您出了剪刀。" << endl;
			switch (cpucin())
			{
			case 1:
				cout << "剪刀对拳头，判负。" << endl;
				score(0);
				break;
			case 2:
				cout << "剪刀对剪刀，平局。" << endl;
				score(2);
				break;
			case 3:
				cout << "剪刀对布，获胜。"  << endl;
				score(1);
				break;
			}
		}
		else if (playeri == 3)
		{
			cout << "您出了布。" << endl;
			switch (cpucin())
			{
			case 1:
				cout << "布对拳头，获胜。" << endl;
				score(1);
				break;
			case 2:
				cout << "布对剪刀，判负。" << endl;
				score(0);
				break;
			case 3:
				cout << "布对布，平局。"  << endl;
				score(2);
				break;
			}
		}
		int leavei;
		do{
			cout << "输入1继续游戏，输入2退出游戏" << endl;
			cin >> leavei;
			if (leave(leavei) == 1)
			{
				continue;
			}
			else if (leave(leavei) == 2)
			{
				return 0;
			}
		} while (leave(leavei) == 0);
	}
	system("pause");
}